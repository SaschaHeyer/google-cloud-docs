About serving configs  |  Vertex AI Search for commerce  |  Google Cloud
Skip to main content
Technology areas
close
AI and ML
Application development
Application hosting
Compute
Data analytics and pipelines
Databases
Distributed, hybrid, and multicloud
Generative AI
Industry solutions
Networking
Observability and monitoring
Security
Storage
Cross-product tools
close
Access and resources management
Costs and usage management
Infrastructure as code
Migration
SDK, languages, frameworks, and tools
Related sites
close
Google Cloud Home
Free Trial and Free Tier
Architecture Center
Blog
Contact Sales
Google Cloud Developer Center
Google Developer Center
Google Cloud Marketplace
Google Cloud Marketplace Documentation
Google Cloud Skills Boost
Google Cloud Solution Center
Google Cloud Support
Google Cloud Tech Youtube Channel
/
English
Deutsch
Español
Español – América Latina
Français
Indonesia
Italiano
Português
Português – Brasil
中文 – 简体
中文 – 繁體
日本語
한국어
Console
Sign in
Vertex AI Search for commerce
Guides
Reference
Support
Resources
Contact Us
Start free
Technology areas
More
Guides
Reference
Support
Resources
Cross-product tools
More
Related sites
More
Console
Contact Us
Start free
Discover
Product overview
What is Vertex AI search for commerce?
Features and capabilities
Global endpoints
Guided search
About facets for search
Conversational product filtering
Overview
User experience guide
Developer guide
Conversational Commerce agent
Overview
User experience guide
Developer guide
Tile navigation
Get started
How Vertex AI search for commerce works
Before you begin
Initial setup
Authenticate to Vertex AI search for commerce
Identity and access management (IAM)
Implement Vertex AI search for commerce
Quickstart tutorials
Interactive tutorials
Troubleshoot tutorial issues
Create personalized movie recommendations
Prepare your data for indexing
About catalogs and products
Product attributes
Attribution tokens
Entities
About user events
Send your search data
Import historical user events
Record real-time user events
Import autocomplete data for search
Import catalog information
Build your commerce UI
Implement user events
Autocomplete for search
Search as you type
Query expansion
About serving configs
About serving controls
Personalization
Create serving configs
Create serving controls
Filter and order results
Boost results
Deploy Vertex AI
Recommendations
Get recommendations
Filter recommendations
Use recommendations in emails
Search
Get search results
Data quality
Manage search results
Manage serving configs
Manage serving controls
Manage site-wide attribute controls
Manage catalog information
Manage user events
Models
About recommendation models
Create recommendation models
Using a pretrained LLM
Manage models
Supported world languages
Data insights
Export your data into BigQuery
Export commerce metrics to BigQuery
Measure performance
View analytics
Get dashboards that show key performance indicators
Generate sales forecasts from commerce data
Monitor and troubleshoot
Set up Cloud Monitoring alerts
About A/B experiments
Monitor and analyze A/B experiments
Monitor and troubleshoot
Audit logging information
Govern and maintain
Update inventory
Update local inventory
Data governance for commerce
AI and ML
Application development
Application hosting
Compute
Data analytics and pipelines
Databases
Distributed, hybrid, and multicloud
Generative AI
Industry solutions
Networking
Observability and monitoring
Security
Storage
Access and resources management
Costs and usage management
Infrastructure as code
Migration
SDK, languages, frameworks, and tools
Google Cloud Home
Free Trial and Free Tier
Architecture Center
Blog
Contact Sales
Google Cloud Developer Center
Google Developer Center
Google Cloud Marketplace
Google Cloud Marketplace Documentation
Google Cloud Skills Boost
Google Cloud Solution Center
Google Cloud Support
Google Cloud Tech Youtube Channel
Home
Documentation
Industry solutions
Vertex AI Search for commerce
Guides
Send feedback
About serving configs
This page describes serving configs. A serving config is a serving
entity that associates a model or a set of controls that are used to generate
your recommendation or search results.
Relationship with models and controls
When you
create a serving config
, you select a model
(for recommendations) or controls (for search) to
attach. Serving configs are invoked by your site when surfacing recommendations
or search results. At serving time, the serving config's associated model or
controls are referenced to determine what the recommendations or search results
generate.
Models
A recommendations serving config can have a single model
associated with it. However, any model can be associated with multiple serving
configurations, enabling you to deploy the same model on different pages using
different serving configs.
Serving controls
Search serving configs have a multi-to-multi relationship with
serving controls. You can add multiple serving controls to a serving config, and
a single serving control can be associated with multiple serving configs.
You can create serving controls and then add or swap them into a live
search serving config.
API resource and permissions
A serving config is passed into the API using the
placements
resource:
Recommendations uses the URL
projects/
PROJECT_ID
/locations/global/catalogs/default_catalog/placements/
SERVING_CONFIG_ID
:predict
.
Search uses the URL
projects/
PROJECT_ID
/locations/global/catalogs/default_catalog/placements/
SERVING_CONFIG_ID
:search
.
The permissions used on these resources are the
placements.search
and
placements.predict
permissions.
Support for placements in Vertex AI Search for commerce
Serving configurations are available as of Recommendations AI v2 and
  Retail Search v2alpha.
The
servingConfig
resource is available in the API versions
  v2beta and v2alpha. You can use this resource to create, view, edit, and remove
  serving configurations.
If you have existing placements, or create new placements, serving
  configurations associated with each placement are automatically created.
  Creating a serving configuration does not create a corresponding placement.
Deleting a serving configuration deletes its corresponding placement, and deleting a
  placement deletes its corresponding serving configuration.
Serving configurations allow you to edit diversity and price reranking options and have them take
  effect in near real-time. With placements, diversity and pricing settings can only be changed from
  the recommendation model that the placement points to.
Placements are still supported, but using serving configurations instead is recommended. If a random
serving_config_id
is placed as part of the search request, search will default to essentially an empty or non-configured serving control, allowing Vertex AI Search for commerce to still work with default search capability.
Recommendations options for serving configs
The following options allow you to change the behavior of a
recommendations serving config.
These options were previously available when creating models; they are now
associated with serving configs instead.
Price reranking
Price reranking causes recommended catalog items with a similar recommendation
probability to be ordered by price, with the highest-priced items first.
Price reranking is disabled by default.
Enabling price reranking helps balance conversion rates and average order
values. Because relevance is also used to order the items returned, enabling
price reranking is not the same as sorting by price.
This option can be edited after creating a serving config.
Result diversification
If you want to ensure that results returned from a single prediction request are
more diversified rather than looking similar, you can enable diversification.
Generally, diversification reduces the likelihood that similar products are
shown in a recommendation panel, at the risk of removing some good
recommendations. Diversification settings can be edited after creating a serving
configuration. It is disabled by default.
Two types of diversification are available: rule-based diversity and data-driven
diversity.
Note:
Boost controls and diversity (rule-based or data-driven) are not compatible with each other. Only specify one of these settings at a time.
Rule-based diversity
Rule-based diversity relies on categories of your product catalog. Use
rule-based diversity to recommend products from a variety of categories.
Diversification is configured by level, with higher levels of diversification
causing fewer items to be displayed per category. This diversification type
works best if your catalog provides high-quality product categories.
Diversification level
Max items per category
None
Unlimited
Low
3
Medium
2
High
1
Auto
Depends on catalog
Data-driven diversity
Use data-driven diversity to produce recommendations results that balance
relevance and diversity. Data-driven diversity learns from product catalog
metadata, such as titles or categories. Instead of relying on the title or
category words, data-driven diversity captures semantic similarity to produce
better-performing diversification.
Diversification level
Max similar items
None
Unlimited
Low
3
Medium
2
High
1
Auto
Depends on catalog
Category matching
If the serving config includes a Similar Items model for
recommendations, you can enable category matching. When category
matching is used, the only product results returned are those that share at
least one category with the context product.
If your categories have deeply nested hierarchies, they are
truncated using heuristics to improve the possibility of a match. For
example, if the context product's categories are
a > b > c > d > e > f
, the
returned results are those whose categories are
a > b > c
.
Category matching can be used in combination with other filtering options, such
as price, availability, and filter tags. For example, if you use the filter tag
fall_Sale
and have category match enabled, the returned results are those that
have both the required tag and a category match.
This option can be edited after creating a serving config. By default,
category matching is disabled.
Dynamic faceting search option for serving configs
You can turn on dynamic faceting when you create or edit a serving
configuration.
When dynamic faceting is enabled for a serving config,
search can automatically use attributes as dynamic facets in
search results for this configuration, based on past user behavior such as facet
clicks and views. Whether a given attribute can be used as a facet is by default
defined by the product-level
attribute
configuration.
Dynamic faceting settings in the API can be overwritten
by site-wide attribute controls in the Search for commerce console. See
Managing site-wide controls
.
Note that dynamic facets can be created based just on accurate product catalog data.
However, for the feature to work optimally for your site, the facet models need
to learn from activity on your site. For this, you need to set query, category
and filter fields in your
search
event
uploads accurately.
Next steps
Request predictions
from your new placement.
Send feedback
Except as otherwise noted, the content of this page is licensed under the
Creative Commons Attribution 4.0 License
, and code samples are licensed under the
Apache 2.0 License
. For details, see the
Google Developers Site Policies
. Java is a registered trademark of Oracle and/or its affiliates.
Last updated 2025-10-24 UTC.
Why Google
Choosing Google Cloud
Trust and security
Modern Infrastructure Cloud
Multicloud
Global infrastructure
Customers and case studies
Analyst reports
Whitepapers
Products and pricing
See all products
See all solutions
Google Cloud for Startups
Google Cloud Marketplace
Google Cloud pricing
Contact sales
Support
Community forums
Support
Release Notes
System status
Resources
GitHub
Getting Started with Google Cloud
Google Cloud documentation
Code samples
Cloud Architecture Center
Training and Certification
Developer Center
Engage
Blog
Events
X (Twitter)
Google Cloud on YouTube
Google Cloud Tech on YouTube
Become a Partner
Google Cloud Affiliate Program
Press Corner
About Google
Privacy
Site terms
Google Cloud terms
Manage cookies
Our third decade of climate action: join us
Sign up for the Google Cloud newsletter
Subscribe
English
Deutsch
Español
Español – América Latina
Français
Indonesia
Italiano
Português
Português – Brasil
中文 – 简体
中文 – 繁體
日本語
한국어