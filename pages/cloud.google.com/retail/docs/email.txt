Use recommendations in emails  |  Vertex AI Search for commerce  |  Google Cloud
Skip to main content
Technology areas
close
AI and ML
Application development
Application hosting
Compute
Data analytics and pipelines
Databases
Distributed, hybrid, and multicloud
Generative AI
Industry solutions
Networking
Observability and monitoring
Security
Storage
Cross-product tools
close
Access and resources management
Costs and usage management
Infrastructure as code
Migration
SDK, languages, frameworks, and tools
Related sites
close
Google Cloud Home
Free Trial and Free Tier
Architecture Center
Blog
Contact Sales
Google Cloud Developer Center
Google Developer Center
Google Cloud Marketplace
Google Cloud Marketplace Documentation
Google Cloud Skills Boost
Google Cloud Solution Center
Google Cloud Support
Google Cloud Tech Youtube Channel
/
English
Deutsch
Español
Español – América Latina
Français
Indonesia
Italiano
Português
Português – Brasil
中文 – 简体
中文 – 繁體
日本語
한국어
Console
Sign in
Vertex AI Search for commerce
Guides
Reference
Support
Resources
Contact Us
Start free
Technology areas
More
Guides
Reference
Support
Resources
Cross-product tools
More
Related sites
More
Console
Contact Us
Start free
Discover
Product overview
What is Vertex AI search for commerce?
Features and capabilities
Global endpoints
Guided search
About facets for search
Conversational product filtering
Overview
User experience guide
Developer guide
Conversational Commerce agent
Overview
User experience guide
Developer guide
Tile navigation
Get started
How Vertex AI search for commerce works
Before you begin
Initial setup
Authenticate to Vertex AI search for commerce
Identity and access management (IAM)
Implement Vertex AI search for commerce
Quickstart tutorials
Interactive tutorials
Troubleshoot tutorial issues
Create personalized movie recommendations
Prepare your data for indexing
About catalogs and products
Product attributes
Attribution tokens
Entities
About user events
Send your search data
Import historical user events
Record real-time user events
Import autocomplete data for search
Import catalog information
Build your commerce UI
Implement user events
Autocomplete for search
Search as you type
Query expansion
About serving configs
About serving controls
Personalization
Create serving configs
Create serving controls
Filter and order results
Boost results
Deploy Vertex AI
Recommendations
Get recommendations
Filter recommendations
Use recommendations in emails
Search
Get search results
Data quality
Manage search results
Manage serving configs
Manage serving controls
Manage site-wide attribute controls
Manage catalog information
Manage user events
Models
About recommendation models
Create recommendation models
Using a pretrained LLM
Manage models
Supported world languages
Data insights
Export your data into BigQuery
Export commerce metrics to BigQuery
Measure performance
View analytics
Get dashboards that show key performance indicators
Generate sales forecasts from commerce data
Monitor and troubleshoot
Set up Cloud Monitoring alerts
About A/B experiments
Monitor and analyze A/B experiments
Monitor and troubleshoot
Audit logging information
Govern and maintain
Update inventory
Update local inventory
Data governance for commerce
AI and ML
Application development
Application hosting
Compute
Data analytics and pipelines
Databases
Distributed, hybrid, and multicloud
Generative AI
Industry solutions
Networking
Observability and monitoring
Security
Storage
Access and resources management
Costs and usage management
Infrastructure as code
Migration
SDK, languages, frameworks, and tools
Google Cloud Home
Free Trial and Free Tier
Architecture Center
Blog
Contact Sales
Google Cloud Developer Center
Google Developer Center
Google Cloud Marketplace
Google Cloud Marketplace Documentation
Google Cloud Skills Boost
Google Cloud Solution Center
Google Cloud Support
Google Cloud Tech Youtube Channel
Home
Documentation
Industry solutions
Vertex AI Search for commerce
Guides
Send feedback
Use recommendations in emails
While prediction results from Vertex AI Search for commerce are most commonly used
in retail websites, you can also use recommendations in email
messages. Recommendations in email are usually included as part of marketing
campaign email blasts, after-order emails, or abandoned cart emails.
Choose a model type
The Recommended for You model can be a useful model for emails because it is designed to
deliver recommendations in use cases where a user hasn't indicated interest in a
specific item. It works best with logged-in users that have some browsing or
shopping history.
The Others You May Like model is typically used on product details pages rather
than for email campaigns. However, you can use it for emails to recommend
similar or complementary items to what a customer has recently viewed.
The Frequently Bought Together model is usually used on the add-to-cart page or the shopping cart
page, but can also be used for email.
The Buy it Again model is designed for use on most types of pages and can also be
used for email.
Request requirements
In order to get relevant recommendations back, the
userId
field
must match the user ID that is associated with a logged-in user on your website
or app.
Ideally, the
visitorId
field should match the user's last session ID from the
site. Because the last session ID isn't always recorded, a random unique
identifier can also be sent as the
visitorId
field.
Frequently Bought Together and Others You May Like models also require product IDs in the
productDetails
section of the predict call. For Frequently Bought Together
models, the IDs can be items from a user's most recent purchase.
Include static predictions in email
You can send static predictions by inserting data into an email template.
The
predict
method can be called in real time as emails go out, or the
recommendations can be retrieved individually and saved either as part of an
email template or in a database to be referenced later. To have the most up to
date recommendations, call the
predict
method as close in time as possible to
when the email is sent.
Call the
predict
method for email
The Vertex AI Search for commerce
predict
method
takes some fields as
input and returns a list of product recommendations.
visitorId
,
userId
, and
id
are used as input for most recommendations models.
Each prediction request for a user must be made individually, using code or
shell scripts.
The following is pseudocode for a predict request:
for user in userlist:
  emailTemplate.recommendations = predict(user.visitorid,user.userid,user.lastorder.id,...)
...
format email template as required
Include dynamic predictions in email
Although static predictions can be quickly implemented, they can become outdated
more quickly than dynamic predictions. A user might not open the email for some
time, and better recommendations could be available by that time. More
sophisticated bulk email systems can add dynamic content by including a
reference to an image in an HTML email.
The following is example HTML for an image that includes a serving config
reference:
<img src="https://example.com/recs/email?userid=47832&campaign=2020FALL&servingconfig=fbt>
Getting the recommendations back can be done with a Cloud Run function, or
any server-side app that can make the prediction request. The predict results
then need to be turned into an image. This can be done with a library, such
as
ImageMagick
.
Predictions are only made for opened, viewed emails. You can also cache the
results rather than creating a new image if the user opens the email again.
This reduces the cost of using recommendations for emails.
Because the link destination is typically hard-coded into the email, you don't
necessarily know which products will be shown. Redirecting clicks to individual
product pages requires additional configuration. You'll usually use a single
image for all recommendations, so using an image map can help you determine
which product was clicked.
Quotas
If you plan to run a large batch of predict requests over a short period of
time, you should check your quotas. On your project's
Quotas
page, check
Recommendation prediction
requests per project per minute
. You can request an increase by clicking
Edit Quotas
on the quota's details page.
We recommend implementing
exponential backoff
to retry
requests after a delay. The service returns
HTTP 429
responses if quota is
exceeded.
Evaluate results
URL tagging lets you track and evaluate the effectiveness of campaigns.
You can use
Google Analytics
or another analytics
platform to add tracking parameters to links in emails and include that data in
reports. Tag recommendation clicks from emails to filter them so that you can
evaluate metrics.
If you A/B test multiple recommendations, we recommend doing so within a single
campaign. All standard
A/B testing guidelines
for websites still
apply.
What's next
Create a serving config
for your model.
Learn how to
pause and resume training
for your model.
When the model finishes training,
start requesting recommendations
.
Use
A/B experiments
to understand how Vertex AI Search for commerce
impacts your business.
Send feedback
Except as otherwise noted, the content of this page is licensed under the
Creative Commons Attribution 4.0 License
, and code samples are licensed under the
Apache 2.0 License
. For details, see the
Google Developers Site Policies
. Java is a registered trademark of Oracle and/or its affiliates.
Last updated 2025-10-24 UTC.
Why Google
Choosing Google Cloud
Trust and security
Modern Infrastructure Cloud
Multicloud
Global infrastructure
Customers and case studies
Analyst reports
Whitepapers
Products and pricing
See all products
See all solutions
Google Cloud for Startups
Google Cloud Marketplace
Google Cloud pricing
Contact sales
Support
Community forums
Support
Release Notes
System status
Resources
GitHub
Getting Started with Google Cloud
Google Cloud documentation
Code samples
Cloud Architecture Center
Training and Certification
Developer Center
Engage
Blog
Events
X (Twitter)
Google Cloud on YouTube
Google Cloud Tech on YouTube
Become a Partner
Google Cloud Affiliate Program
Press Corner
About Google
Privacy
Site terms
Google Cloud terms
Manage cookies
Our third decade of climate action: join us
Sign up for the Google Cloud newsletter
Subscribe
English
Deutsch
Español
Español – América Latina
Français
Indonesia
Italiano
Português
Português – Brasil
中文 – 简体
中文 – 繁體
日本語
한국어